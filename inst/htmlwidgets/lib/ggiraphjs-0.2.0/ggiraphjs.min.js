var ggiraphjs=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=d3},function(e,t,n){"use strict";var i;!function(){var n=void 0!==t&&t||{}||this||window;void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i);var r="http://www.w3.org/2000/xmlns/",o=/url\(["']?(.+?)["']?\)/,s={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},l=function(e){if(!function(e){return e instanceof HTMLElement||e instanceof SVGElement}(e))throw new Error("an HTMLElement or SVGElement is required; got "+e)},a=function(e,t,n){var i=e.viewBox&&e.viewBox.baseVal&&e.viewBox.baseVal[n]||null!==t.getAttribute(n)&&!t.getAttribute(n).match(/%$/)&&parseInt(t.getAttribute(n))||e.getBoundingClientRect()[n]||parseInt(t.style[n])||parseInt(window.getComputedStyle(e).getPropertyValue(n));return void 0===i||null===i||isNaN(parseFloat(i))?0:i},c=function(e){for(var t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})},d=function(e,t){var n=e.cssText.match(o),i=n&&n[1]||"";if(i&&!i.match(/^data:/)&&"about:blank"!==i){var r=i.startsWith("../")?t+"/../"+i:i.startsWith("./")?t+"/."+i:i;return{text:e.cssText,format:function(e){var t=Object.keys(s).filter(function(t){return e.indexOf("."+t)>0}).map(function(e){return s[e]});return t?t[0]:(console.error("Unknown font format for "+e+". Fonts may not be working correctly."),"application/octet-stream")}(r),url:r}}},u=function(e){return Promise.all(Array.from(e.querySelectorAll("image")).map(function(e){var t=e.getAttributeNS("http://www.w3.org/1999/xlink","href")||e.getAttribute("href");return t?(function(e){return e&&0===e.lastIndexOf("http",0)&&-1===e.lastIndexOf(window.location.host)}(t)&&(t+=(-1===t.indexOf("?")?"?":"&")+"t="+(new Date).valueOf()),new Promise(function(n,i){var r=document.createElement("canvas"),o=new Image;o.crossOrigin="anonymous",o.src=t,o.onerror=function(){return i(new Error("Could not load "+t))},o.onload=function(){r.width=o.width,r.height=o.height,r.getContext("2d").drawImage(o,0,0),e.setAttributeNS("http://www.w3.org/1999/xlink","href",r.toDataURL("image/png")),n(!0)}})):Promise.resolve(null)}))},h={},f=function(e){return Promise.all(e.map(function(e){return new Promise(function(t,n){if(h[e.url])return t(h[e.url]);var i=new XMLHttpRequest;i.addEventListener("load",function(){var n=function(e){for(var t="",n=new Uint8Array(e),i=0;i<n.byteLength;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(i.response),r=e.text.replace(o,'url("data:'+e.format+";base64,"+n+'")')+"\n";h[e.url]=r,t(r)}),i.addEventListener("error",function(n){console.warn("Failed to load font from: "+e.url,n),h[e.url]=null,t(null)}),i.addEventListener("abort",function(n){console.warn("Aborted loading font from: "+e.url,n),t(null)}),i.open("GET",e.url),i.responseType="arraybuffer",i.send()})})).then(function(e){return e.filter(function(e){return e}).join("")})},v=null,g=function(e,t){var n=t||{},i=n.selectorRemap,r=n.modifyStyle,o=n.modifyCss,s=n.fonts,l=o||function(e,t){return(i?i(e):e)+"{"+(r?r(t):t)+"}\n"},a=[],c=void 0===s,u=s||[];return(v||(v=Array.from(document.styleSheets).map(function(e){try{return{rules:e.cssRules,href:e.href}}catch(t){return console.warn("Stylesheet could not be loaded: "+e.href,t),{}}}))).forEach(function(t){var n=t.rules,i=t.href;n&&Array.from(n).forEach(function(t){if(void 0!==t.style)if(function(e,t){if(t)try{return e.querySelector(t)||e.parentNode&&e.parentNode.querySelector(t)}catch(e){console.warn('Invalid CSS selector "'+t+'"',e)}}(e,t.selectorText))a.push(l(t.selectorText,t.style.cssText));else if(c&&t.cssText.match(/^@font-face/)){var n=d(t,i);n&&u.push(n)}else a.push(t.cssText)})}),f(u).then(function(e){return a.join("\n")+e})};n.prepareSvg=function(e,t,n){l(e);var i=t||{},o=i.left,s=void 0===o?0:o,c=i.top,d=void 0===c?0:c,h=i.width,f=i.height,v=i.scale,p=void 0===v?1:v,y=i.responsive,m=void 0!==y&&y;return u(e).then(function(){var i=e.cloneNode(!0),o=(t||{}).backgroundColor,l=void 0===o?"transparent":o;i.style.backgroundColor=l;var c=function(e,t,n,i){if("svg"===e.tagName)return{width:n||a(e,t,"width"),height:i||a(e,t,"height")};if(e.getBBox){var r=e.getBBox(),o=r.x,s=r.y;return{width:o+r.width,height:s+r.height}}}(e,i,h,f),u=c.width,v=c.height;if("svg"!==e.tagName){if(!e.getBBox)return void console.error("Attempted to render non-SVG element",e);i.setAttribute("transform",i.getAttribute("transform").replace(/translate\(.*?\)/,""));var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.appendChild(i),i=y}return i.setAttribute("version","1.1"),i.setAttribute("viewBox",[s,d,u,v].join(" ")),i.getAttribute("xmlns")||i.setAttributeNS(r,"xmlns","http://www.w3.org/2000/svg"),i.getAttribute("xmlns:xlink")||i.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),m?(i.removeAttribute("width"),i.removeAttribute("height"),i.setAttribute("preserveAspectRatio","xMinYMin meet")):(i.setAttribute("width",u*p),i.setAttribute("height",v*p)),Array.from(i.querySelectorAll("foreignObject > *")).forEach(function(e){e.getAttribute("xmlns")||e.setAttributeNS(r,"xmlns","http://www.w3.org/1999/xhtml")}),g(e,t).then(function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML="<![CDATA[\n"+e+"\n]]>";var r=document.createElement("defs");r.appendChild(t),i.insertBefore(r,i.firstChild);var o=document.createElement("div");o.appendChild(i);var s=o.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if("function"!=typeof n)return{src:s,width:u,height:v};n(s,u,v)})})},n.svgAsDataUri=function(e,t,i){l(e);var r=n.prepareSvg(e,t).then(function(e){var t=e.src;return"data:image/svg+xml;base64,"+window.btoa(function(e){return decodeURIComponent(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){var n=String.fromCharCode("0x"+t);return"%"===n?"%25":n}))}('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>'+t))});return"function"==typeof i?r.then(i):r},n.svgAsPngUri=function(e,t,i){l(e);var r=t||{},o=r.encoderType,s=void 0===o?"image/png":o,a=r.encoderOptions,c=void 0===a?.8:a,d=r.canvg,u=function(e){var t=e.src,n=e.width,r=e.height,o=document.createElement("canvas"),l=o.getContext("2d"),a=window.devicePixelRatio||1;o.width=n*a,o.height=r*a,o.style.width=o.width+"px",o.style.height=o.height+"px",l.setTransform(a,0,0,a,0,0),d?d(o,t):l.drawImage(t,0,0);var u=void 0;try{u=o.toDataURL(s,c)}catch(e){if("undefined"!=typeof SecurityError&&e instanceof SecurityError||"SecurityError"===e.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw e}return"function"==typeof i&&i(u),Promise.resolve(u)};return d?n.prepareSvg(e,t).then(u):n.svgAsDataUri(e,t).then(function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){return t(u({src:i,width:i.width,height:i.height}))},i.onerror=function(){n("There was an error loading the data URI as an image on the following SVG\n"+window.atob(e.slice(26))+"Open the following link to see browser's diagnosis\n"+e)},i.src=e})})},n.download=function(e,t){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(c(t),e);else{var n=document.createElement("a");if("download"in n){n.download=e,n.style.display="none",document.body.appendChild(n);try{var i=c(t),r=URL.createObjectURL(i);n.href=r,n.onclick=function(){return requestAnimationFrame(function(){return URL.revokeObjectURL(r)})}}catch(e){console.warn("This browser does not support object URLs. Falling back to string URL."),n.href=t}n.click(),document.body.removeChild(n)}else window.open(t,"_temp","menubar=no,toolbar=no,status=no")}},n.saveSvg=function(e,t,i){l(e),n.svgAsDataUri(e,i||{},function(e){return n.download(t,e)})},n.saveSvgAsPng=function(e,t,i){l(e),n.svgAsPngUri(e,i||{},function(e){return n.download(t,e)})}}()},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(1);function o(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!==(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerid=t,this.dataSelected=[],this.dataKeySelected=[],this.dataThemeSelected=[],this.typeSelection=null,this.svgid=null,this.inputId=null,this.inputKeyId=null,this.inputThemeId=null,this.zoomer=null}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"setSvgId",value:function(e){this.svgid=e}},{key:"setZoomer",value:function(e,t){this.zoomer=i.zoom().scaleExtent([e,t])}},{key:"tooltipClassname",value:function(){return"tooltip_"+this.svgid}},{key:"selectedDataClassname",value:function(){return"clicked_"+this.svgid}},{key:"selectedKeyClassname",value:function(){return"clickedkey_"+this.svgid}},{key:"selectedThemeClassname",value:function(){return"clickedtheme_"+this.svgid}},{key:"hoverClassname",value:function(){return"hover_"+this.svgid}},{key:"hoverKeyClassname",value:function(){return"hoverkey_"+this.svgid}},{key:"hoverThemeClassname",value:function(){return"hovertheme_"+this.svgid}},{key:"addStyle",value:function(e,t,n,r,o,s,l){var a=i.select("#"+this.containerid+" style");a.size()>0&&a.remove();var c=".tooltip_"+this.svgid+e+"\n.hover_"+this.svgid+t+"\n.hoverkey_"+this.svgid+n+"\n.hovertheme_"+this.svgid+r+"\n.clicked_"+this.svgid+o+"\n.clickedkey_"+this.svgid+s+"\n.clickedtheme_"+this.svgid+l+"\n";i.select("#"+this.containerid).append("style").text(c)}},{key:"setInputId",value:function(e){this.inputId=e}},{key:"setInputKeyId",value:function(e){this.inputKeyId=e}},{key:"setInputThemeId",value:function(e){this.inputThemeId=e}},{key:"addUI",value:function(e,t,n,i){!function(e,t,n,i,o){var s=d3.select("#"+e.containerid+" .girafe_container_std").append("div").classed("ggiraph-toolbar",!0);if(s.classed(o,!0),t){var l=s.append("div").classed("ggiraph-toolbar-block",!0).classed("shinyonly",!0);l.append("a").classed("ggiraph-toolbar-icon",!0).classed("neutral",!0).attr("title","lasso selection").on("click",function(){e.lasso_on(!0)}).html("<svg width='15pt' height='15pt' viewBox='0 0 230 230'><g><ellipse ry='65.5' rx='86.5' cy='94' cx='115.5' stroke-width='20' fill='transparent'/><ellipse ry='11.500001' rx='10.5' cy='153' cx='91.5' stroke-width='20' fill='transparent'/><line y2='210.5' x2='105' y1='164.5' x1='96' stroke-width='20'/></g></svg>"),l.append("a").classed("ggiraph-toolbar-icon",!0).classed("drop",!0).attr("title","lasso selection").on("click",function(){e.lasso_on(!1)}).html("<svg width='15pt' height='15pt' viewBox='0 0 230 230'><g><ellipse ry='65.5' rx='86.5' cy='94' cx='115.5' stroke-width='20' fill='transparent'/><ellipse ry='11.500001' rx='10.5' cy='153' cx='91.5' stroke-width='20' fill='transparent'/><line y2='210.5' x2='105' y1='164.5' x1='96' stroke-width='20'/></g></svg>")}if(n){var a=s.append("div").classed("ggiraph-toolbar-block",!0);a.append("a").classed("ggiraph-toolbar-icon",!0).classed("neutral",!0).attr("title","pan-zoom reset").on("click",function(){e.zoomIdentity()}).html("<svg width='15pt' height='15pt' viewBox='0 0 512 512'><g><polygon points='274,209.7 337.9,145.9 288,96 416,96 416,224 366.1,174.1 302.3,238 '/><polygon points='274,302.3 337.9,366.1 288,416 416,416 416,288 366.1,337.9 302.3,274'/><polygon points='238,302.3 174.1,366.1 224,416 96,416 96,288 145.9,337.9 209.7,274'/><polygon points='238,209.7 174.1,145.9 224,96 96,96 96,224 145.9,174.1 209.7,238'/></g><svg>"),a.append("a").classed("ggiraph-toolbar-icon",!0).classed("neutral",!0).attr("title","activate pan-zoom").on("click",function(){e.zoomOn()}).html("<svg width='15pt' height='15pt' viewBox='0 0 512 512'><g><ellipse ry='150' rx='150' cy='213' cx='203.5' stroke-width='50' fill='transparent'/><line y2='455.5' x2='416' y1='331.5' x1='301' stroke-width='50'/></g></svg>"),a.append("a").classed("ggiraph-toolbar-icon",!0).classed("drop",!0).attr("title","deactivate pan-zoom").on("click",function(){e.zoomOff()}).html("<svg width='15pt' height='15pt' viewBox='0 0 512 512'><g><ellipse ry='150' rx='150' cy='213' cx='203.5' stroke-width='50' fill='transparent'/><line y2='455.5' x2='416' y1='331.5' x1='301' stroke-width='50'/><line y2='455' x2='0' y1='0' x1='416' stroke-width='30'/></g></svg>")}i&&s.append("div").classed("ggiraph-toolbar-block",!0).append("a").classed("ggiraph-toolbar-icon",!0).classed("neutral",!0).attr("title","download png").on("click",function(){"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?r.saveSvgAsPng(document.getElementById(e.svgid),"diagram.png"):console.error("This navigator does not support Promises")}).html("<svg width='15pt' height='15pt' viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'><g><polygon points='95 275 95 415 415 415 415 275 375 275 375 380 135 380 135 275'/><polygon points='220 30 220 250 150 175 150 245 250 345 350 245 350 175 280 250 280 30'/></g></svg>")}(this,e,t,n,i)}},{key:"removeContent",value:function(){var e=i.select("#"+this.containerid+" .girafe_container_std svg");e.size()>0&&i.select(".tooltip_"+e.attr("id")).remove();var t=i.select("#"+this.containerid+" div.girafe_container_std");t.size()>0&&t.remove();var n="."+this.tooltipClassname(),r=i.select(n);r.size()>0&&r.remove()}},{key:"addSvg",value:function(e,t){(this.removeContent(),i.select("#"+this.containerid).append("div").attr("class","girafe_container_std").html(e),i.select("body").append("div").attr("class",this.tooltipClassname()).style("position","absolute").style("opacity",0),t)&&function(e){var t=e.indexOf("{"),n=e.substring(t+1,e.lastIndexOf("}")),i=e.substring(0,t),r=i.substring(i.indexOf("(")+1,i.lastIndexOf(")")).split(",");function o(){return Function.apply(this,r)}return r.push(n),o.prototype=Function.prototype,new o}(t)()}},{key:"IEFixResize",value:function(e,t){if("IE 11"==o()||"MSIE"===o().substring(0,4)){var n=this.containerid,r=this.svgid;i.select("#"+r).classed("girafe_svg_ie",!0),i.select("#"+n+" div").classed("girafe_container_ie",!0).style("width",Math.round(100*e)+"%").style("padding-bottom",Math.round(e*t*100)+"%")}}},{key:"autoScale",value:function(e){var t=this.svgid;i.select("#"+t).style("width",e).style("height","100%").style("margin-left","auto").style("margin-right","auto")}},{key:"fixSize",value:function(e,t){var n=this.containerid,r=this.svgid;i.select("#"+r).attr("preserveAspectRatio","xMidYMin meet"),i.select("#"+n+" .girafe_container_std").style("width","100%"),i.select("#"+r).attr("width",e).attr("height",t),i.select("#"+r).style("width",e).style("height",t)}},{key:"setSizeLimits",value:function(e,t,n,r){var o=this.svgid;i.select("#"+o).style("max-width",e).style("max-height",n).style("min-width",t).style("min-height",r)}},{key:"removeContainerLimits",value:function(){if("IE 11"==o()||"MSIE"===o().substring(0,4));else{var e=this.containerid;i.select("#"+e).style("width",null).style("height",null)}}},{key:"animateToolbar",value:function(){var e=this.containerid;i.select("#"+e).on("mouseover",function(t){i.select("#"+e+" div.ggiraph-toolbar").transition().duration(200).style("opacity",.8)}).on("mouseout",function(t){i.select("#"+e+" div.ggiraph-toolbar").transition().duration(500).style("opacity",0)})}},{key:"animateGElements",value:function(e,t,n,r,o,s,l,a){var c=this.hoverClassname(),d=this.hoverKeyClassname(),u=this.hoverThemeClassname(),h=i.selectAll("#"+this.svgid+" *[title], #"+this.svgid+" *[data-id], #"+this.svgid+" *[key-id], #"+this.svgid+" *[theme-id]"),f="."+this.tooltipClassname(),v=this.svgid,g=this.containerid;h.on("mouseover",function(s){null!==this.getAttribute("theme-id")&&i.selectAll("#"+v+' *[theme-id="'+this.getAttribute("theme-id")+'"]').classed(u,!0);null!==this.getAttribute("key-id")&&i.selectAll("#"+v+' *[key-id="'+this.getAttribute("key-id")+'"]').classed(d,!0);null!==this.getAttribute("data-id")&&i.selectAll("#"+v+' *[data-id="'+this.getAttribute("data-id")+'"]').classed(c,!0);if(null!==this.getAttribute("title")){var h=i.select(f);if(h.transition().duration(o).style("opacity",e),l){var p=this.getAttribute("fill");h.style("background-color",p)}if(a){var y=this.getAttribute("stroke");h.style("border-color",y)}h.html(this.getAttribute("title")),h.html(h.text());var m=h.node().getBoundingClientRect(),w=i.select("#"+g).node().getBoundingClientRect();if(r){var b=i.event.pageX+t,x=b+m.width-(w.x+w.width);x>0&&(b-=x);var S=i.event.pageY+n,k=S+m.height-(w.y+w.height+window.pageYOffset);k>0&&(S-=k),h.style("left",b+"px").style("top",S+"px")}else h.style("left",t+w.left+"px").style("top",document.documentElement.scrollTop+w.y+n+"px")}}).on("mousemove",function(e){if(null!==this.getAttribute("title")){var o=i.select(f),s=o.node().getBoundingClientRect(),l=i.select("#"+g).node().getBoundingClientRect();if(r){var a=i.event.pageX+t,c=a+s.width-(l.x+l.width);c>0&&(a-=c);var d=i.event.pageY+n,u=d+s.height-(l.y+l.height+window.pageYOffset);u>0&&(d-=u),o.style("left",a+"px").style("top",d+"px")}else o.style("left",t+l.left+"px").style("top",document.documentElement.scrollTop+l.y+n+"px")}}).on("mouseout",function(e){null!==this.getAttribute("theme-id")&&i.selectAll("#"+v+' *[theme-id="'+this.getAttribute("theme-id")+'"]').classed(u,!1);null!==this.getAttribute("key-id")&&i.selectAll("#"+v+' *[key-id="'+this.getAttribute("key-id")+'"]').classed(d,!1);null!==this.getAttribute("data-id")&&i.selectAll("#"+v+' *[data-id="'+this.getAttribute("data-id")+'"]').classed(c,!1);null!==this.getAttribute("title")&&i.select(f).transition().duration(s).style("opacity",0)})}},{key:"setSelected",value:function(e){this.dataSelected=e,this.refreshSelected(),this.inputId&&Shiny.onInputChange(this.inputId,this.dataSelected)}},{key:"setKeySelected",value:function(e){this.dataKeySelected=e,this.refreshKeySelected(),this.inputKeyId&&Shiny.onInputChange(this.inputKeyId,this.dataKeySelected)}},{key:"setThemeSelected",value:function(e){this.dataThemeSelected=e,this.refreshThemeSelected(),this.inputThemeId&&Shiny.onInputChange(this.inputThemeId,this.dataThemeSelected)}},{key:"selectizeMultiple",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[data-id]").on("click",function(t,n){var r=e.dataSelected,o=i.select(this).attr("data-id"),s=r.indexOf(o);s<0?r.push(o):r.splice(s,1),e.dataSelected=r,e.refreshSelected(),e.inputId&&Shiny.onInputChange(e.inputId,e.dataSelected)})}},{key:"selectizeSingle",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[data-id]").on("click",function(t,n){var r=e.dataSelected,o=i.select(this).attr("data-id");r=r.indexOf(o)<0?[o]:[],e.dataSelected=r,e.refreshSelected(),e.inputId&&Shiny.onInputChange(e.inputId,e.dataSelected)})}},{key:"selectizeNone",value:function(){i.selectAll("#"+this.svgid+" *[data-id]").on("click",null)}},{key:"selectizeKeyMultiple",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[key-id]").on("click",function(t,n){var r=e.dataKeySelected,o=i.select(this).attr("key-id"),s=r.indexOf(o);s<0?r.push(o):r.splice(s,1),e.dataKeySelected=r,e.refreshKeySelected(),e.inputKeyId&&Shiny.onInputChange(e.inputKeyId,e.dataKeySelected)})}},{key:"selectizeKeySingle",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[key-id]").on("click",function(t,n){var r=e.dataKeySelected,o=i.select(this).attr("key-id");r=r.indexOf(o)<0?[o]:[],e.dataKeySelected=r,e.refreshKeySelected(),e.inputKeyId&&Shiny.onInputChange(e.inputKeyId,e.dataKeySelected)})}},{key:"selectizeKeyNone",value:function(){i.selectAll("#"+this.svgid+" *[key-id]").on("click",null)}},{key:"selectizeThemeMultiple",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[theme-id]").on("click",function(t,n){var r=e.dataThemeSelected,o=i.select(this).attr("theme-id"),s=r.indexOf(o);s<0?r.push(o):r.splice(s,1),e.dataThemeSelected=r,e.refreshThemeSelected(),e.inputThemeId&&Shiny.onInputChange(e.inputThemeId,e.dataThemeSelected)})}},{key:"selectizeThemeSingle",value:function(){var e=this;i.selectAll("#"+this.svgid+" *[theme-id]").on("click",function(t,n){var r=e.dataThemeSelected,o=i.select(this).attr("theme-id");r=r.indexOf(o)<0?[o]:[],e.dataThemeSelected=r,e.refreshThemeSelected(),e.inputThemeId&&Shiny.onInputChange(e.inputThemeId,e.dataThemeSelected)})}},{key:"selectizeThemeNone",value:function(){i.selectAll("#"+this.svgid+" *[theme-id]").on("click",null)}},{key:"refreshSelected",value:function(){var e=this.selectedDataClassname(),t=this.svgid,n=i.select("#"+t);n.selectAll("*[data-id]").classed(e,!1);var r=this;i.selectAll(r.dataSelected).each(function(t,i){n.selectAll('*[data-id="'+r.dataSelected[i]+'"]').classed(e,!0)})}},{key:"refreshKeySelected",value:function(){var e=this.selectedKeyClassname(),t=this.svgid,n=i.select("#"+t);n.selectAll("*[key-id]").classed(e,!1);var r=this;i.selectAll(r.dataKeySelected).each(function(t,i){n.selectAll('*[key-id="'+r.dataKeySelected[i]+'"]').classed(e,!0)})}},{key:"refreshThemeSelected",value:function(){var e=this.selectedThemeClassname(),t=this.svgid,n=i.select("#"+t);n.selectAll("*[theme-id]").classed(e,!1);var r=this;i.selectAll(r.dataThemeSelected).each(function(t,i){n.selectAll('*[theme-id="'+r.dataThemeSelected[i]+'"]').classed(e,!0)})}},{key:"zoomOn",value:function(){var e=this.svgid;i.select("#"+this.containerid).call(this.zoomer.on("zoom",function(){i.select("#"+e+" g").attr("transform",i.event.transform)}))}},{key:"zoomIdentity",value:function(){i.select("#"+this.containerid).call(this.zoomer.transform,i.zoomIdentity)}},{key:"zoomOff",value:function(){i.select("#"+this.containerid).call(this.zoomer.on("zoom",null))}},{key:"isSelectable",value:function(){var e=this.svgid,t=i.select("#"+e);return t.selectAll("*[data-id]").size()>0||t.selectAll("*[key-id]").size()>0||t.selectAll("*[theme-id]").size()>0}},{key:"lasso_on",value:function(e){var t=this.svgid,n=this,r=i.lasso();r=r.closePathSelect(!0).closePathDistance(100).items(i.select("#"+t).selectAll("*[data-id]")).targetArea(i.select("#"+t)).on("start",function(){}).on("draw",function(){}).on("end",function(){r.selectedItems().each(function(t,r){i.select(this).classed(n.selectedDataClassname(),!0);var o=i.select(this).attr("data-id"),s=n.dataSelected.indexOf(o);s<0&&e?n.dataSelected.push(o):s>=0&&!e&&n.dataSelected.splice(s,1)}),n.refreshSelected(),i.select("#"+t).on(".dragstart",null).on(".drag",null).on(".dragend",null),n.inputId&&Shiny.onInputChange(n.inputId,n.dataSelected)}),i.select("#"+t).call(r)}}]),e}();function a(e){return new l(e)}n.d(t,"newgi",function(){return a})}]);