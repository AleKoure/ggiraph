!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.ggiraphjs=e(require("d3")):t.ggiraphjs=e(t.d3)}(window,(function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=85)}([function(e,n){e.exports=t},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(51))},function(t,e,n){var i=n(2),r=n(33).f,o=n(15),s=n(16),a=n(22),l=n(58),c=n(65);t.exports=function(t,e){var n,u,f,h,d,v=t.target,p=t.global,g=t.stat;if(n=p?i:g?i[v]||a(v,{}):(i[v]||{}).prototype)for(u in e){if(h=e[u],f=t.noTargetGet?(d=r(n,u))&&d.value:n[u],!c(p?u:v+(g?".":"#")+u,t.forced)&&void 0!==f){if(typeof h==typeof f)continue;l(h,f)}(t.sham||f&&f.sham)&&o(h,"sham",!0),s(n,u,h,t)}}},function(t,e,n){var i=n(6);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var i=n(2),r=n(38),o=n(7),s=n(39),a=n(45),l=n(67),c=r("wks"),u=i.Symbol,f=l?u:u&&u.withoutSetter||s;t.exports=function(t){return o(c,t)||(a&&o(u,t)?c[t]=u[t]:c[t]=f("Symbol."+t)),c[t]}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(12),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(1);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var i=n(34),r=n(11);t.exports=function(t){return i(r(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(3),r=n(9);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:n(17).f})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(9),r=n(17),o=n(20);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(2),r=n(15),o=n(7),s=n(22),a=n(36),l=n(54),c=l.get,u=l.enforce,f=String(String).split("String");(t.exports=function(t,e,n,a){var l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||r(n,"name",e),u(n).source=f.join("string"==typeof e?e:"")),t!==i?(l?!h&&t[e]&&(c=!0):delete t[e],c?t[e]=n:r(t,e,n)):c?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},function(t,e,n){var i=n(9),r=n(35),o=n(4),s=n(21),a=Object.defineProperty;e.f=i?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var i,r,o=n(43),s=n(66),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,u=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),f=s.UNSUPPORTED_Y||s.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];(u||h||f)&&(c=function(t){var e,n,i,r,s=this,c=f&&s.sticky,d=o.call(s),v=s.source,p=0,g=t;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(v="(?: "+v+")",g=" "+g,p++),n=new RegExp("^(?:"+v+")",d)),h&&(n=new RegExp("^"+v+"$(?!\\s)",d)),u&&(e=s.lastIndex),i=a.call(c?n:s,g),c?i?(i.input=i.input.slice(p),i[0]=i[0].slice(p),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:u&&i&&(s.lastIndex=s.global?i.index+i[0].length:e),h&&i&&i.length>1&&l.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),t.exports=c},function(t,e,n){var i=n(9),r=n(1),o=n(7),s=Object.defineProperty,a={},l=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:l,f=o(e,1)?e[1]:void 0;return a[t]=!!n&&!r((function(){if(c&&!i)return!0;var t={length:-1};c?s(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,u,f)}))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(2),r=n(15);t.exports=function(t,e){try{r(i,t,e)}catch(n){i[t]=e}return e}},function(t,e,n){var i=n(12),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){"use strict";var i=n(3),r=n(18);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(t,e,n){"use strict";n(25);var i=n(16),r=n(1),o=n(5),s=n(18),a=n(15),l=o("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u="$0"==="a".replace(/./,"$0"),f=o("replace"),h=!!/./[f]&&""===/./[f]("a","$0"),d=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var v=o(t),p=!r((function(){var e={};return e[v]=function(){return 7},7!=""[t](e)})),g=p&&!r((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return e=!0,null},n[v](""),!e}));if(!p||!g||"replace"===t&&(!c||!u||h)||"split"===t&&!d){var y=/./[v],m=n(v,""[t],(function(t,e,n,i,r){return e.exec===s?p&&!r?{done:!0,value:y.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),x=m[0],S=m[1];i(String.prototype,t,x),i(RegExp.prototype,v,2==e?function(t,e){return S.call(t,this,e)}:function(t){return S.call(t,this)})}f&&a(RegExp.prototype[v],"sham",!0)}},function(t,e,n){"use strict";var i=n(68).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){var i=n(14),r=n(18);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,n){"use strict";var i=n(3),r=n(42).indexOf,o=n(24),s=n(19),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?a.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(14);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i={};i[n(5)("toStringTag")]="z",t.exports="[object z]"===String(i)},function(t,e,n){"use strict";var i=n(3),r=n(34),o=n(10),s=n(24),a=[].join,l=r!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return a.call(o(this),void 0===t?",":t)}})},function(t,e,n){var i=n(9),r=n(52),o=n(20),s=n(10),a=n(21),l=n(7),c=n(35),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=s(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(l(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var i=n(1),r=n(14),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var i=n(9),r=n(1),o=n(53);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(37),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return r.call(t)}),t.exports=i.inspectSource},function(t,e,n){var i=n(2),r=n(22),o=i["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=o},function(t,e,n){var i=n(57),r=n(37);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+i).toString(36)}},function(t,e){t.exports={}},function(t,e,n){var i=n(60),r=n(2),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t])||o(r[t]):i[t]&&i[t][e]||r[t]&&r[t][e]}},function(t,e,n){var i=n(10),r=n(8),o=n(23),s=function(t){return function(e,n,s){var a,l=i(e),c=r(l.length),u=o(s,c);if(t&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){"use strict";var i=n(4);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var i=n(26),r=n(4),o=n(46),s=n(8),a=n(12),l=n(11),c=n(27),u=n(28),f=Math.max,h=Math.min,d=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(t,e,n,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=i.REPLACE_KEEPS_$0,m=g?"$":"$0";return[function(n,i){var r=l(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!g&&y||"string"==typeof i&&-1===i.indexOf(m)){var o=n(e,t,this,i);if(o.done)return o.value}var l=r(t),d=String(this),v="function"==typeof i;v||(i=String(i));var p=l.global;if(p){var S=l.unicode;l.lastIndex=0}for(var b=[];;){var w=u(l,d);if(null===w)break;if(b.push(w),!p)break;""===String(w[0])&&(l.lastIndex=c(d,s(l.lastIndex),S))}for(var E,_="",k=0,O=0;O<b.length;O++){w=b[O];for(var I=String(w[0]),N=f(h(a(w.index),d.length),0),A=[],M=1;M<w.length;M++)A.push(void 0===(E=w[M])?E:String(E));var P=w.groups;if(v){var j=[I].concat(A,N,d);void 0!==P&&j.push(P);var C=String(i.apply(void 0,j))}else C=x(I,d,N,A,P,i);N>=k&&(_+=d.slice(k,N)+C,k=N+I.length)}return _+d.slice(k)}];function x(t,n,i,r,s,a){var l=i+t.length,c=r.length,u=p;return void 0!==s&&(s=o(s),u=v),e.call(a,u,(function(e,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(l);case"<":a=s[o.slice(1,-1)];break;default:var u=+o;if(0===u)return e;if(u>c){var f=d(u/10);return 0===f?e:f<=c?void 0===r[f-1]?o.charAt(1):r[f-1]+o.charAt(1):e}a=r[u-1]}return void 0===a?"":a}))}}))},function(t,e,n){var i=n(1);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(t,e,n){var i=n(11);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=n(21),r=n(17),o=n(20);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},function(t,e,n){var i=n(1),r=n(5),o=n(72),s=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){"use strict";var i=n(3),r=n(23),o=n(12),s=n(8),a=n(46),l=n(74),c=n(47),u=n(48),f=n(19),h=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,p=Math.min;i({target:"Array",proto:!0,forced:!h||!d},{splice:function(t,e){var n,i,u,f,h,d,g=a(this),y=s(g.length),m=r(t,y),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=y-m):(n=x-2,i=p(v(o(e),0),y-m)),y+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(g,i),f=0;f<i;f++)(h=m+f)in g&&c(u,f,g[h]);if(u.length=i,n<i){for(f=m;f<y-i;f++)d=f+n,(h=f+i)in g?g[d]=g[h]:delete g[d];for(f=y;f>y-i+n;f--)delete g[f-1]}else if(n>i)for(f=y-i;f>m;f--)d=f+n-1,(h=f+i-1)in g?g[d]=g[h]:delete g[d];for(f=0;f<n;f++)g[f+m]=arguments[f+2];return g.length=y-i+n,u}})},function(t,e,n){n(3)({target:"Array",stat:!0},{isArray:n(30)})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},function(t,e,n){var i=n(2),r=n(6),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,n){var i,r,o,s=n(55),a=n(2),l=n(6),c=n(15),u=n(7),f=n(56),h=n(40),d=a.WeakMap;if(s){var v=new d,p=v.get,g=v.has,y=v.set;i=function(t,e){return y.call(v,t,e),e},r=function(t){return p.call(v,t)||{}},o=function(t){return g.call(v,t)}}else{var m=f("state");h[m]=!0,i=function(t,e){return c(t,m,e),e},r=function(t){return u(t,m)?t[m]:{}},o=function(t){return u(t,m)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var i=n(2),r=n(36),o=i.WeakMap;t.exports="function"==typeof o&&/native code/.test(r(o))},function(t,e,n){var i=n(38),r=n(39),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e){t.exports=!1},function(t,e,n){var i=n(7),r=n(59),o=n(33),s=n(17);t.exports=function(t,e){for(var n=r(e),a=s.f,l=o.f,c=0;c<n.length;c++){var u=n[c];i(t,u)||a(t,u,l(e,u))}}},function(t,e,n){var i=n(41),r=n(61),o=n(64),s=n(4);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(2);t.exports=i},function(t,e,n){var i=n(62),r=n(63).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(7),r=n(10),o=n(42).indexOf,s=n(40);t.exports=function(t,e){var n,a=r(t),l=0,c=[];for(n in a)!i(s,n)&&i(a,n)&&c.push(n);for(;e.length>l;)i(a,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(1),r=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==c||n!=l&&("function"==typeof e?i(e):!!e)},s=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){"use strict";var i=n(1);function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,n){var i=n(45);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var i=n(12),r=n(11),o=function(t){return function(e,n){var o,s,a=String(r(e)),l=i(n),c=a.length;return l<0||l>=c?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){var i=n(3),r=n(70);i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},function(t,e,n){"use strict";var i=n(10),r=n(12),o=n(8),s=n(24),a=n(19),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,f=s("lastIndexOf"),h=a("indexOf",{ACCESSORS:!0,1:0}),d=u||!f||!h;t.exports=d?function(t){if(u)return c.apply(this,arguments)||0;var e=i(this),n=o(e.length),s=n-1;for(arguments.length>1&&(s=l(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c},function(t,e,n){"use strict";var i=n(3),r=n(6),o=n(30),s=n(23),a=n(8),l=n(10),c=n(47),u=n(5),f=n(48),h=n(19),d=f("slice"),v=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),g=[].slice,y=Math.max;i({target:"Array",proto:!0,forced:!d||!v},{slice:function(t,e){var n,i,u,f=l(this),h=a(f.length),d=s(t,h),v=s(void 0===e?h:e,h);if(o(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[p])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(f,d,v);for(i=new(void 0===n?Array:n)(y(v-d,0)),u=0;d<v;d++,u++)d in f&&c(i,u,f[d]);return i.length=u,i}})},function(t,e,n){var i,r,o=n(2),s=n(73),a=o.process,l=a&&a.versions,c=l&&l.v8;c?r=(i=c.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),t.exports=r&&+r},function(t,e,n){var i=n(41);t.exports=i("navigator","userAgent")||""},function(t,e,n){var i=n(6),r=n(30),o=n(5)("species");t.exports=function(t,e){var n;return r(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var i=n(26),r=n(4),o=n(8),s=n(11),a=n(27),l=n(28);i("match",1,(function(t,e,n){return[function(e){var n=s(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var s=r(t),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;for(var f,h=[],d=0;null!==(f=l(s,c));){var v=String(f[0]);h[d]=v,""===v&&(s.lastIndex=a(c,o(s.lastIndex),u)),d++}return 0===d?null:h}]}))},function(t,e,n){"use strict";var i=n(26),r=n(77),o=n(4),s=n(11),a=n(78),l=n(27),c=n(8),u=n(28),f=n(18),h=n(1),d=[].push,v=Math.min,p=!h((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(s(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,o);for(var a,l,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,p=new RegExp(t.source,h+"g");(a=f.call(p,i))&&!((l=p.lastIndex)>v&&(u.push(i.slice(v,a.index)),a.length>1&&a.index<i.length&&d.apply(u,a.slice(1)),c=a[0].length,v=l,u.length>=o));)p.lastIndex===a.index&&p.lastIndex++;return v===i.length?!c&&p.test("")||u.push(""):u.push(i.slice(v)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=s(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(String(r),e,n)},function(t,r){var s=n(i,t,this,r,i!==e);if(s.done)return s.value;var f=o(t),h=String(this),d=a(f,RegExp),g=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(p?"y":"g"),m=new d(p?f:"^(?:"+f.source+")",y),x=void 0===r?4294967295:r>>>0;if(0===x)return[];if(0===h.length)return null===u(m,h)?[h]:[];for(var S=0,b=0,w=[];b<h.length;){m.lastIndex=p?b:0;var E,_=u(m,p?h:h.slice(b));if(null===_||(E=v(c(m.lastIndex+(p?0:b)),h.length))===S)b=l(h,b,g);else{if(w.push(h.slice(S,b)),w.length===x)return w;for(var k=1;k<=_.length-1;k++)if(w.push(_[k]),w.length===x)return w;b=S=E}}return w.push(h.slice(S)),w}]}),!p)},function(t,e,n){var i=n(6),r=n(14),o=n(5)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(4),r=n(79),o=n(5)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[o])?e:r(n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var i=n(16),r=Date.prototype,o=r.toString,s=r.getTime;new Date(NaN)+""!="Invalid Date"&&i(r,"toString",(function(){var t=s.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,n){var i=n(31),r=n(16),o=n(82);i||r(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var i=n(31),r=n(83);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(t,e,n){var i=n(31),r=n(14),o=n(5)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=i?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e,n){"use strict";var i=n(16),r=n(4),o=n(1),s=n(43),a=RegExp.prototype,l=a.toString,c=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u="toString"!=l.name;(c||u)&&i(RegExp.prototype,"toString",(function(){var t=r(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in a)?s.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";n.r(e),n.d(e,"factory",(function(){return m}));n(32),n(13),n(25),n(44);var i=n(0);n(29),n(69),n(71),n(49),n(75),n(76);function r(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}n(80),n(81),n(84);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e,n,i,r,o,s,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerid=e,this.svgid=n,this.clsName=i,this.position=r,this.zoomHandler=o,this.selectionHandler=s,this.saveaspng=a&&"function"==typeof saveSvgAsPng,this.pngname=l}var e,n,r;return e=t,(n=[{key:"init",value:function(t){if(!(this.zoomHandler||this.selectionHandler||this.saveaspng))return!1;var e=(t?i.select("#"+this.svgid+" > foreignObject.girafe-svg-foreign-object"):i.select("#"+this.containerid+" .girafe_container_std")).insert("xhtml:div",t?":first-child":null).classed(this.clsName,!0).classed(this.clsName+"-"+this.position,!0).style("pointer-events","all"),n=this;if(this.selectionHandler){var r=e.append("xhtml:div").classed(this.clsName+"-block",!0);r.append("xhtml:a").classed(this.clsName+"-icon",!0).classed("neutral",!0).attr("title","lasso selection").on("click",(function(){n.selectionHandler.lasso(!0)})).html(a.lasso_on),r.append("xhtml:a").classed(this.clsName+"-icon",!0).classed("drop",!0).attr("title","lasso deselection").on("click",(function(){n.selectionHandler.lasso(!1)})).html(a.lasso_off)}if(this.zoomHandler){var o=e.append("xhtml:div").classed(this.clsName+"-block",!0);o.append("xhtml:a").classed(this.clsName+"-icon",!0).classed("neutral",!0).attr("title","pan-zoom reset").on("click",(function(){n.zoomHandler.zoomIdentity()})).html(a.pan_zoom_reset),o.append("xhtml:a").classed(this.clsName+"-icon",!0).classed("neutral",!0).attr("title","activate pan-zoom").on("click",(function(){n.zoomHandler.zoomOn()})).html(a.zoom_on),o.append("xhtml:a").classed(this.clsName+"-icon",!0).classed("drop",!0).attr("title","deactivate pan-zoom").on("click",(function(){n.zoomHandler.zoomOff()})).html(a.zoom_off)}this.saveaspng&&e.append("xhtml:div").classed(this.clsName+"-block",!0).append("xhtml:a").classed(this.clsName+"-icon",!0).classed("neutral",!0).attr("title","download png").on("click",(function(){"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?saveSvgAsPng(document.getElementById(n.svgid),n.pngname+".png",{encoderOptions:1}):console.error("This navigator does not support Promises")})).html(a.save_as_png);var s=i.select("#"+this.containerid).node();return s.addEventListener("mouseover",this),s.addEventListener("mouseout",this),!0}},{key:"destroy",value:function(){var t=i.select("#"+this.containerid),e=t.select("."+this.clsName);try{t.node().removeEventListener("mouseover",this),t.node().removeEventListener("mouseout",this)}catch(t){console.error(t)}try{e.selectAll("."+this.clsName+"-icon").on("click",null)}catch(t){console.error(t)}e.remove()}},{key:"handleEvent",value:function(t){try{var e=i.select("#"+this.containerid).select("."+this.clsName);"mouseover"==t.type?e.transition().duration(200).style("opacity",.8):"mouseout"==t.type&&e.transition().duration(500).style("opacity",0)}catch(t){console.error(t)}}}])&&o(e.prototype,n),r&&o(e,r),t}(),a={lasso_on:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 230 230'><g><ellipse ry='65.5' rx='86.5' cy='94' cx='115.5' stroke-width='20' fill='transparent'/><ellipse ry='11.500001' rx='10.5' cy='153' cx='91.5' stroke-width='20' fill='transparent'/><line y2='210.5' x2='105' y1='164.5' x1='96' stroke-width='20'/></g></svg>",lasso_off:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 230 230'><g><ellipse ry='65.5' rx='86.5' cy='94' cx='115.5' stroke-width='20' fill='transparent'/><ellipse ry='11.500001' rx='10.5' cy='153' cx='91.5' stroke-width='20' fill='transparent'/><line y2='210.5' x2='105' y1='164.5' x1='96' stroke-width='20'/></g></svg>",pan_zoom_reset:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><g><polygon points='274,209.7 337.9,145.9 288,96 416,96 416,224 366.1,174.1 302.3,238 '/><polygon points='274,302.3 337.9,366.1 288,416 416,416 416,288 366.1,337.9 302.3,274'/><polygon points='238,302.3 174.1,366.1 224,416 96,416 96,288 145.9,337.9 209.7,274'/><polygon points='238,209.7 174.1,145.9 224,96 96,96 96,224 145.9,174.1 209.7,238'/></g></svg>",zoom_on:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><g><ellipse ry='150' rx='150' cy='213' cx='203.5' stroke-width='50' fill='transparent'/><line y2='455.5' x2='416' y1='331.5' x1='301' stroke-width='50'/></g></svg>",zoom_off:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><g><ellipse ry='150' rx='150' cy='213' cx='203.5' stroke-width='50' fill='transparent'/><line y2='455.5' x2='416' y1='331.5' x1='301' stroke-width='50'/><line y2='455' x2='0' y1='0' x1='416' stroke-width='30'/></g></svg>",save_as_png:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><g><polygon points='95 275 95 415 415 415 415 275 375 275 375 380 135 380 135 275'/><polygon points='220 30 220 250 150 175 150 245 250 345 350 245 350 175 280 250 280 30'/></g></svg>"};function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerid=e,this.svgid=n,this.min=i,this.max=r,this.zoomer=null}var e,n,r;return e=t,(n=[{key:"init",value:function(){return!(1===this.min&&this.max<=1||(this.zoomer=i.zoom().scaleExtent([this.min,this.max]),0))}},{key:"destroy",value:function(){this.zoomOff(),this.zoomer=null}},{key:"zoomOn",value:function(){var t=this.svgid;i.select("#"+this.containerid).call(this.zoomer.on("zoom",(function(){i.select("#"+t+" > g").attr("transform",i.event.transform)})))}},{key:"zoomIdentity",value:function(){i.select("#"+this.containerid).call(this.zoomer.transform,i.zoomIdentity)}},{key:"zoomOff",value:function(){i.select("#"+this.containerid).call(this.zoomer.on("zoom",null))}}])&&l(e.prototype,n),r&&l(e,r),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e,n,i,r,o,s,a,l,c,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svgid=e,this.clsName=n+"_"+this.svgid,this.opacity=i,this.offx=r,this.offy=o,this.usecursor=s,this.usefill=a,this.usestroke=l,this.delayover=c,this.delayout=u}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.standaloneMode=t;var e=i.select("#"+this.svgid).selectAll("*[title]");if(e.empty())return!1;i.select("div."+this.clsName).empty()&&(this.standaloneMode?i.select("#"+this.svgid+" > foreignObject.girafe-svg-foreign-object"):i.select("body")).append("xhtml:div").classed(this.clsName,!0).style("position","absolute").style("opacity",0);var n=this;return e.each((function(){this.addEventListener("mouseover",n),this.addEventListener("mousemove",n),this.addEventListener("mouseout",n)})),!0}},{key:"destroy",value:function(){var t=this;try{i.select("#"+this.svgid).selectAll("*[title]").each((function(){this.removeEventListener("mouseover",t),this.removeEventListener("mousemove",t),this.removeEventListener("mouseout",t)}))}catch(t){console.error(t)}i.select("."+this.clsName).remove()}},{key:"handleEvent",value:function(t){try{var e,n=i.select("div."+this.clsName),r=i.select("#"+this.svgid).node();this.standaloneMode||(r=r.parentNode),"mouseover"==t.type?(this.usefill&&n.style("background-color",t.target.getAttribute("fill")),this.usestroke&&n.style("border-color",t.target.getAttribute("stroke")),n.html(t.target.getAttribute("title")),n.html(n.text()),e=this.calculateTooltipPosition(n.node(),r,t),n.style("left",e[0]+"px").style("top",e[1]+"px").transition().duration(this.delayover).style("opacity",this.opacity)):"mousemove"==t.type?(e=this.calculateTooltipPosition(n.node(),r,t),n.style("left",e[0]+"px").style("top",e[1]+"px")):"mouseout"==t.type&&(e=[-4e3,-4e3],n.style("left",e[0]+"px").style("top",e[1]+"px").transition().duration(this.delayout).style("opacity",0))}catch(t){console.error(t)}}},{key:"calculateTooltipPosition",value:function(t,e,n,i){var r,o;if(this.usecursor){var s,a,l,c,u,f;if(this.standaloneMode){var h=function(t,e){var n=t.ownerSVGElement||t,i=t.getBoundingClientRect();if(n.createSVGPoint){var r=n.createSVGPoint();r.x=e.clientX,r.y=e.clientY;var o=t.getScreenCTM();return 0===o.e&&(o.e=i.left),[(r=r.matrixTransform(o.inverse())).x,r.y]}return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}(e,n);r=h[0],o=h[1];var d=t.parentElement.getBBox();l=0,c=0,u=d.width,f=d.height,s=t.offsetWidth,a=t.offsetHeight}else{r=n.pageX,o=n.pageY,l=window.pageXOffset,c=window.pageYOffset,u=window.innerWidth+window.pageXOffset,f=window.innerHeight+window.pageYOffset;var v=t.getBoundingClientRect();s=v.width,a=v.height}var p=u-(r+this.offx),g=r-this.offx-l;r=p>=s?Math.max(l,r+this.offx):g>=s?Math.min(u-s,r-this.offx-s):Math.max(l,Math.min(u,r+s/2)-s);var y=f-(o+this.offy),m=o-this.offy-c;o=y>=a?Math.max(c,o+this.offy):m>=a?Math.min(f-a,o-this.offy-a):Math.max(c,Math.min(f,o+a/2)-a)}else if(this.standaloneMode)r=this.offx,o=this.offy;else{var x=e.getBoundingClientRect(),S=document.documentElement;r=this.offx+x.left+S.scrollLeft,o=this.offy+x.top+S.scrollTop}return[r,o]}}])&&u(e.prototype,n),r&&u(e,r),t}();n(50);function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(e,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svgid=e,this.clsName=n+"_"+e,this.invClsName=i?i+"_"+e:null,this.attrName=r,this.shinyInputId=o,this.shinyMessageId=s,this.dataHovered=[]}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=i.select("#"+this.svgid).selectAll("*["+this.attrName+"]");if(t.empty())return!1;var e=this;return t.each((function(){this.addEventListener("mouseover",e),this.addEventListener("mouseout",e)})),this.shinyMessageId&&Shiny.addCustomMessageHandler(this.shinyMessageId,(function(t){"string"==typeof t?e.setHovered([t]):Array.isArray(t)&&e.setHovered(t)})),!0}},{key:"destroy",value:function(){var t=this;try{i.select("#"+this.svgid).selectAll("*["+this.attrName+"]").each((function(){this.removeEventListener("mouseover",t),this.removeEventListener("mouseout",t)}))}catch(t){console.error(t)}if(this.shinyMessageId)try{Shiny.addCustomMessageHandler(this.shinyMessageId,(function(t){}))}catch(t){console.error(t)}this.dataHovered=[]}},{key:"handleEvent",value:function(t){try{"mouseover"==t.type?this.setHovered([t.target.getAttribute(this.attrName)]):"mouseout"==t.type&&this.setHovered([])}catch(t){console.error(t)}}},{key:"setHovered",value:function(t){this.dataHovered=t,this.refreshHovered(),this.shinyInputId&&Shiny.onInputChange(this.shinyInputId,this.dataHovered)}},{key:"refreshHovered",value:function(){var t=i.select("#"+this.svgid);t.selectAll("*["+this.attrName+"]."+this.clsName).classed(this.clsName,!1),this.invClsName&&t.selectAll("*["+this.attrName+"]."+this.invClsName).classed(this.invClsName,!1);for(var e=0;e<this.dataHovered.length;e++)t.selectAll("*["+this.attrName+'="'+this.dataHovered[e]+'"]').classed(this.clsName,!0);this.invClsName&&this.dataHovered.length>0&&t.selectAll("*["+this.attrName+"]:not(."+this.clsName+")").classed(this.invClsName,!0)}}])&&h(e.prototype,n),r&&h(e,r),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(e,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svgid=e,this.clsName=n+"_"+e,this.attrName=i,this.shinyInputId=r,this.shinyMessageId=o,this.type=s,this.initialSelection=a,this.dataSelected=[]}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=i.select("#"+this.svgid).selectAll("*["+this.attrName+"]");if(t.empty()||"single"!=this.type&&"multiple"!=this.type)return!1;var e=this;return t.each((function(){this.addEventListener("click",e)})),this.shinyMessageId&&Shiny.addCustomMessageHandler(this.shinyMessageId,(function(t){"string"==typeof t?e.setSelected([t]):Array.isArray(t)&&e.setSelected(t)})),"string"==typeof this.initialSelection?this.setSelected([this.initialSelection]):Array.isArray(this.initialSelection)&&"multiple"==this.type&&this.setSelected(this.initialSelection),this.initialSelection=null,!0}},{key:"destroy",value:function(){var t=this;try{i.select("#"+this.svgid).selectAll("*["+this.attrName+"]").each((function(){this.removeEventListener("click",t)}))}catch(t){console.error(t)}if(this.shinyMessageId)try{Shiny.addCustomMessageHandler(this.shinyMessageId,(function(t){}))}catch(t){console.error(t)}this.dataSelected=[]}},{key:"handleEvent",value:function(t){try{var e=this.dataSelected,n=t.target.getAttribute(this.attrName),i=e.indexOf(n);"multiple"==this.type?i<0?e.push(n):e.splice(i,1):e=i<0?[n]:[],this.setSelected(e)}catch(t){console.error(t)}}},{key:"setSelected",value:function(t){this.dataSelected=t,this.refreshSelected(),this.shinyInputId&&Shiny.onInputChange(this.shinyInputId,this.dataSelected)}},{key:"refreshSelected",value:function(){var t=i.select("#"+this.svgid);t.selectAll("*["+this.attrName+"]."+this.clsName).classed(this.clsName,!1);for(var e=0;e<this.dataSelected.length;e++)t.selectAll("*["+this.attrName+'="'+this.dataSelected[e]+'"]').classed(this.clsName,!0)}},{key:"lasso",value:function(t){var e=i.select("#"+this.svgid),n=this,r=i.lasso();try{r=r.closePathSelect(!0).closePathDistance(100).items(e.selectAll("*["+this.attrName+"]")).targetArea(e.select("g")).on("start",(function(){})).on("draw",(function(){})).on("end",(function(){try{var i=n.dataSelected;r.selectedItems().each((function(e,r){var o=this.getAttribute(n.attrName),s=i.indexOf(o);s<0&&t?i.push(o):s>=0&&!t&&i.splice(s,1)})),e.on(".dragstart",null).on(".drag",null).on(".dragend",null),n.setSelected(i)}catch(t){console.error(t)}})),e.call(r)}catch(t){console.error(t)}}}])&&v(e.prototype,n),r&&v(e,r),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerid=e,this.svgid=null,this.handlers=[],this.shinyMode=n,this.standaloneMode=i,this.isIE="IE 11"==r()||"MSIE"===r().substring(0,4)}var e,n,o;return e=t,(n=[{key:"clear",value:function(){for(var t=0;t<this.handlers.length;t++)this.handlers[t].destroy();this.handlers=[],this.standaloneMode||i.select("#"+this.containerid+" style").remove(),i.select("#"+this.containerid+" div.girafe_container_std").remove()}},{key:"setSvgId",value:function(t){this.svgid=t}},{key:"addStyle",value:function(t){var e=t.join(" ").replace(/SVGID_/g,this.svgid);i.select("#"+this.containerid).append("style").attr("type","text/css").text(e)}},{key:"addSvg",value:function(t,e){this.standaloneMode?i.select("#"+this.svgid).append("svg:foreignObject").attr("width","100%").attr("height","100%").classed("girafe-svg-foreign-object",!0).style("pointer-events","none"):i.select("#"+this.containerid).append("div").attr("class","girafe_container_std").html(t),e&&function(t){var e=t.indexOf("{"),n=t.substring(e+1,t.lastIndexOf("}")),i=t.substring(0,e),r=i.substring(i.indexOf("(")+1,i.lastIndexOf(")")).split(",");function o(){return Function.apply(this,r)}return r.push(n),o.prototype=Function.prototype,new o}(e)()}},{key:"IEFixResize",value:function(t,e){this.isIE&&(i.select("#"+this.svgid).classed("girafe_svg_ie",!0),i.select("#"+this.containerid+" div").classed("girafe_container_ie",!0).style("width",Math.round(100*t)+"%").style("padding-bottom",Math.round(t*e*100)+"%"))}},{key:"autoScale",value:function(t){i.select("#"+this.svgid).style("width",t).style("height","100%").style("margin-left","auto").style("margin-right","auto")}},{key:"fixSize",value:function(t,e){i.select("#"+this.svgid).attr("preserveAspectRatio","xMidYMin meet"),this.standaloneMode||i.select("#"+this.containerid+" .girafe_container_std").style("width","100%"),i.select("#"+this.svgid).attr("width",t).attr("height",e),i.select("#"+this.svgid).style("width",t).style("height",e)}},{key:"setSizeLimits",value:function(t,e,n,r){i.select("#"+this.svgid).style("max-width",t).style("max-height",n).style("min-width",e).style("min-height",r)}},{key:"removeContainerLimits",value:function(){this.standaloneMode||this.isIE||i.select("#"+this.containerid).style("width",null).style("height",null)}},{key:"setupTooltip",value:function(t,e,n,i,r,o,s,a,l){try{var c=new f(this.svgid,t,e,n,i,r,o,s,a,l);c.init(this.standaloneMode)&&this.handlers.push(c)}catch(t){console.error(t)}}},{key:"setupHover",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];try{var i=this.shinyMode&&n.reactive?this.containerid+n.inputSuffix:null,r=this.shinyMode&&n.reactive?this.containerid+n.messageSuffix:null,o=new d(this.svgid,n.classPrefix,n.invClassPrefix,n.attrName,i,r);o.init(this.standaloneMode)&&this.handlers.push(o)}catch(t){console.error(t)}}}},{key:"setupSelection",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];try{if((this.shinyMode||!n.only_shiny)&&("single"==n.type||"multiple"==n.type)){var i=this.shinyMode?this.containerid+n.inputSuffix:null,r=this.shinyMode?this.containerid+n.messageSuffix:null,o=new p(this.svgid,n.classPrefix,n.attrName,i,r,n.type,n.selected);o.init(this.standaloneMode)&&this.handlers.push(o)}}catch(t){console.error(t)}}}},{key:"setupZoom",value:function(t,e){try{var n=new c(this.containerid,this.svgid,t,e);n.init(this.standaloneMode)&&this.handlers.push(n)}catch(t){console.error(t)}}},{key:"setupToolbar",value:function(t,e,n,i){try{for(var r=null,o=null,a=0;a<this.handlers.length;a++){var l=this.handlers[a];l instanceof c?r=l:l instanceof p&&"data-id"==l.attrName&&"multiple"==l.type&&(o=l)}var u=new s(this.containerid,this.svgid,t,e,r,o,n,i);u.init(this.standaloneMode)&&this.handlers.push(u)}catch(t){console.error(t)}}}])&&g(e.prototype,n),o&&g(e,o),t}();function m(t,e){return function(n,i,r){var o=new y(n.id,t,e);return{renderValue:function(i){o.clear(),o.setSvgId(i.uid),o.addStyle([i.settings.tooltip.css,i.settings.hoverinv.css,i.settings.hover.css,i.settings.hoverkey.css,i.settings.hovertheme.css,i.settings.capture.css,i.settings.capturekey.css,i.settings.capturetheme.css]),o.addSvg(i.html,i.js);var r=d3.select("#"+o.svgid).property("viewBox").baseVal;i.settings.sizing.rescale?t?(o.autoScale("100%"),o.IEFixResize(1,1/i.ratio),o.setSizeLimits(d3.select(n).style("width"),0,d3.select(n).style("height"),0)):(o.autoScale(Math.round(100*i.settings.sizing.width)+"%"),o.IEFixResize(i.settings.sizing.width,1/i.ratio),o.setSizeLimits("unset","unset","unset","unset"),o.removeContainerLimits()):(o.fixSize(r.width,r.height),e||d3.select(n).style("width",null).style("height",null)),o.setupTooltip("tooltip",i.settings.tooltip.opacity,i.settings.tooltip.offx,i.settings.tooltip.offy,i.settings.tooltip.use_cursor_pos,i.settings.tooltip.usefill,i.settings.tooltip.usestroke,i.settings.tooltip.delay.over,i.settings.tooltip.delay.out),o.setupHover([{classPrefix:"hover",attrName:"data-id",inputSuffix:"_hovered",messageSuffix:"_hovered_set",reactive:i.settings.hover.reactive,invClassPrefix:i.settings.hoverinv.css.length>0?"hover_inv":null},{classPrefix:"hover_key",attrName:"key-id",inputSuffix:"_key_hovered",messageSuffix:"_key_hovered_set",reactive:i.settings.hoverkey.reactive,invClassPrefix:null},{classPrefix:"hover_theme",attrName:"theme-id",inputSuffix:"_theme_hovered",messageSuffix:"_theme_hovered_set",reactive:i.settings.hovertheme.reactive,invClassPrefix:null}]),o.setupSelection([{classPrefix:"selected",attrName:"data-id",inputSuffix:"_selected",messageSuffix:"_set",type:i.settings.capture.type,only_shiny:i.settings.capture.only_shiny,selected:i.settings.capture.selected},{classPrefix:"selected_key",attrName:"key-id",inputSuffix:"_key_selected",messageSuffix:"_key_set",type:i.settings.capturekey.type,only_shiny:i.settings.capturekey.only_shiny,selected:i.settings.capturekey.selected},{classPrefix:"selected_theme",attrName:"theme-id",inputSuffix:"_theme_selected",messageSuffix:"_theme_set",type:i.settings.capturetheme.type,only_shiny:i.settings.capturetheme.only_shiny,selected:i.settings.capturetheme.selected}]),o.setupZoom(i.settings.zoom.min,i.settings.zoom.max),o.setupToolbar("ggiraph-toolbar",i.settings.toolbar.position,i.settings.toolbar.saveaspng,i.settings.toolbar.pngname)},resize:function(t,e){}}}}}])}));